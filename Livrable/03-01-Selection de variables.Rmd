---
title: "La sélection de variables"
author: "CA"
date: "26 juin 2018"
output:
  html_document:
    theme: united
    toc: yes
    toc_depth: 2
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Problématique

Comment sélectionner un champ de variables dans une base de données ?

C'est-à-dire, quel est le verbe clé pour sélectionner certaines variables d'une base de données.

### Solution retenue

Le package **dplyr** offre la fonctionnalité souhaitée.
C'est dans ce package le verbe **select()** qui permet de sélectionner des variables. 

### Niveau d'intégration à l'USSR

#### Développements préconisés



#### Points de vigilance



### Intégration au dispositif de formation

Les outils préconisés ne demandent pas de formation spécifique pour être maîtrisés.

### Particularités de syntaxe

Le package **dplyr** contient des helpers pour faciliter l'appel des variables dans la fonction select.

### Exemples

#### Sélectionner un ensemble de variables en les nommant

Le premier argument représente la base de données, les suivants représentent les variables à conserver.

```{r init,echo=FALSE,message=FALSE}
library("dplyr")
```

```{r select by name}

bdd1 <- select (bdd, var1, var2, var3, var4)

```

#### Sélectionner des variables en indiquant les variables que l'on ne souhaite pas conserver

On indique le signe - devant la variable à supprimer

```{r complémentaire}

bdd2 <- select (bdd, -var)

```

#### Sélectionner toutes les variables qui commencent par une chaine de caractères (helper starts_with) 

```{r}

bdd3 <- select (bdd, starts_with ("code_"))

```

#### Exemple des principaux helpers

starts_with(): starts with a prefix
ends_with(): ends with a prefix
contains(): contains a literal string
one_of(): variables in character vector
everything(): all variables

### Solutions viables non retenues

Il est possible de sélectionner des variables en utilisant les crochets

```{r crochets}

#Sélection de la Jème variable de la bdd
bdd[,j]

#Sélection de la variable VarJ
bdd[,'VarJ']

#Sélection de la Jème à la Kème variables
bdd[,j:k]

#Sélection de la Jème et de la Kème variables
bdd[,c(j,k)]

```

On peut également utiliser la fonction **pull**

```{r pull}

#On extrait la variable var1 de la table bdd
#comme un vecteur var2
var2 <- pull (bdd, var1)

```


### Solutions à ne pas utiliser

Aucune.